<!DOCTYPE html>
<html>
	<head>
		<title>Conway's Game of life</title>
		<style type="text/css">/* Thanks for the help! http://stackoverflow.com/questions/4772906/ -is-it-possible-to-add-a-black-outline-around-each-character-in-text	http://stackoverflow.com/questions/4037212/html-canvas-full-screen */ * { margin:0; padding:0; } html, body { width:100%; height:100%; overflow:hidden; } .canvaswrapper {position:relative; top:0;	left:0; } .sliderwrapper { position:absolute; top:10px; left:10px; background:black; border-style:solid; border-width:4px; border-color:white; padding:4px; } /* Dear god, there must be a better solution than this */ .sliderwrapper > .group { display:inline-block; } p { color:white; text-shadow: 1px 0 0 #000, 0 -1px 0 #000, 0 1px 0 #000, -1px 0 0 #000; }
		</style>
		<link rel='stylesheet' type='text/css' href='gameoflife.css'/>
	</head>
	<body>
		<div class="canvaswrapper">
			<canvas id="canvas">This text is displayed if your browser does not support HTML5 Canvas.</canvas>
			<div class="sliderwrapper">
				<div class="group"><p>Rows</p><input id="rowSlider" type=range min=5 max=400 value=200 oninput="r_input()" /></div>
				<div class="group"><p>Columns</p><input id="columnSlider" type=range min=5 max=400 value=200 oninput="c_input()" /></div>
				<div class="group"><p>Delay (ms)</p><input id="delaySlider" type=range min=1 max=1000 value=1 oninput="timeout_input()" /></div>
				<br>
				<div class="group"><p>Background (Red)</p><input id="bredSlider" type=range min=0 max=255 value=0 oninput="color_input()" /></div>
				<div class="group"><p>Background (Green)</p><input id="bgreenSlider" type=range min=0 max=255 value=0 oninput="color_input()" /></div>
				<div class="group"><p>Background (Blue)</p><input id="bblueSlider" type=range min=0 max=255 value=0 oninput="color_input()" /></div>
				<br>
				<div class="group"><p>Cell (Red)</p><input id="credSlider" type=range min=0 max=255 value=255 oninput="color_input()" /></div>
				<div class="group"><p>Cell (Green)</p><input id="cgreenSlider" type=range min=0 max=255 value=255 oninput="color_input()" /></div>
				<div class="group"><p>Cell (Blue)</p><input id="cblueSlider" type=range min=0 max=255 value=255 oninput="color_input()" /></div>
				<br>
				<div class="group"><p>Grid (Red) (ms)</p><input id="gredSlider" type=range min=0 max=255 value=0 oninput="color_input()" /></div>
				<div class="group"><p>Grid (Green)</p><input id="ggreenSlider" type=range min=0 max=255 value=60 oninput="color_input()" /></div>
				<div class="group"><p>Grid (Blue)</p><input id="gblueSlider" type=range min=0 max=255 value=60 oninput="color_input()" /></div>
				<br>
				<div class="group"><p>Make Square</p></div>
				<div class="group"><input id="squareCheckbox" type="checkbox" onclick="square_input()"/></div>
				<div class="group"><p>Draw Grid</p></div>
				<div class="group"><input id="gridCheckbox" type="checkbox" checked onclick="grid_input()"/></div>
				<div class="group"><input id="resetButton" type="button" value="Reset" onclick="reset()"/></div>
			</div>
		</div>
		<script type='text/javascript'>var canvas = document.getElementById('canvas'); context = canvas.getContext('2d'); var uses_controls; var test_controls = document.getElementById("gridCheckbox"); if(test_controls) { uses_controls = true; } else { uses_controls = false; } var width; var height; var ratio; var cell_width; var cell_height; var updateTask; var repeatTask; var cols = 600; var rows = 600; var timeout = 1; var make_square = true; var draw_grid = false; var one_game_only = true; var game_interval = 5 * 60; var debug = true; var debug_level = 1; var dead_color = "black"; var alive_color = "white"; var grid_color = "red"; if(uses_controls) { setHTMLDefaultControls(); } function resize() { width = window.innerWidth; height = window.innerHeight; ratio = width / height; canvas.width = width; context.canvas.width = width; if(make_square) { cell_width = width / cols;	cell_height = cell_width; canvas.height = width / ratio; context.canvas.height = width / ratio; } else { cell_width = width / cols; cell_height = height / rows; canvas.height = height; context.canvas.height = height; } } resize(); window.onresize = function(event) { resize(); }; if(debug) { console.log("width: " + width); console.log("height: " + height); console.log("cols: " + cols); console.log("rows: " + rows); console.log("cell_width: " + cell_width); console.log("cell_height: " + cell_height); console.log("dead_color: " + dead_color); console.log("alive_color: " + alive_color); console.log("grid_color: " + grid_color); }function Cell(x, y, alive, will_die) { this.x = x;	this.y = y;	this.alive = alive;	this.will_die = will_die; this.live_neighbors = 0; this.print = function() { console.log("Cell, x: " + this.x + ", y: " + this.y + ", alive: " + this.alive + ", live neighbors: " + this.live_neighbors + ", will_die: " + this.will_die); } } function initCells() { var tempcells = []; tempcells.length = rows * cols; for(var y = 0; y < rows; y++) { for(var x = 0; x < cols; x++) { tempcells[y * cols + x] = new Cell(x, y, false, true); } } return(tempcells); } function initSeeds(seeds) { var tempcells = initCells(); if(seeds.length > 0) { for(var i = 0; i < seeds.length; i++) { tempcells[seeds[i][1].y * cols + seeds[i][0].x].alive = true; } } else { for(var i = 0; i < tempcells.length; i++) { tempcells[i].alive = Math.random() >= 0.5; } }	if(debug && debug_level > 1) { for(var i = 0; i < tempcells.length; i++) { if(debug_level >= 3){ tempcells[i].print(); }else if(tempcells[i].alive) { tempcells[i].print(); } } } return(tempcells); } function printCells(tempcells) { for(var i = 0; i < tempcells.length; i++) { tempcells[i].print(); } }function findNeighbors(cell) { var x = cell.x; var y = cell.y;	cell.live_neighbors = 0; if(y > 0) { if(cells[(y - 1) * cols + x].alive) { cell.live_neighbors++; } } if(y > 0 && x < (cols - 1)) { if(cells[(y - 1) * cols + (x + 1)].alive) { cell.live_neighbors++; } } if(x < (cols - 1)) { if(cells[y * cols + (x + 1)].alive) { cell.live_neighbors++; } } if(y < (rows - 1) && x < (cols - 1)) { if(cells[(y + 1) * cols + (x + 1)].alive) { cell.live_neighbors++; } } if(y < (rows - 1)) { if(cells[(y + 1) * cols + x].alive) { cell.live_neighbors++; } } if(y < (rows - 1) && x > 0) {if(cells[(y + 1) * cols + (x - 1)].alive) { cell.live_neighbors++; } } if(x > 0) { if(cells[y * cols + (x - 1)].alive) { cell.live_neighbors++; } } if(x > 0 && y > 0) { if(cells[(y - 1) * cols + (x - 1)].alive) { cell.live_neighbors++; } } return(cell.live_neighbors); } function clear() { context.fillStyle = dead_color; context.fillRect(0, 0, width, height); } function draw(cells) { context.fillStyle = alive_color; for(var y = 0; y < rows; y++) { for(var x = 0; x < cols; x++) { if(cells[y * cols + x].alive) { context.fillRect(x * cell_width, y * cell_height, cell_width, cell_height); if(debug && debug_level >= 4) { if(debug_level < 5) { if(cells[y * cols + x].alive) { cells[y * cols + x].print(); } } else { cells[y * cols + x].print(); } } } } } } function drawGrid() { context.fillStyle = grid_color; if(make_square) { for(var i = 0; i <= cols; i++) { context.fillRect(cell_width * i,0,1,height); context.fillRect(0,cell_height * i,width, 1); } }	else { for(var i = 0; i <= rows; i++) { context.fillRect(0,cell_height * i,width, 1); } for(var i = 0; i <= cols; i++) { context.fillRect(cell_width * i,0,1,height); }	} } function update() {	clear(); draw(cells); if(draw_grid) { drawGrid(); } var to_die;	for(var i = 0; i < cells.length; i++) {	var neighbors = findNeighbors(cells[i]); if(!cells[i].alive && neighbors == 3) { cells[i].will_die = false; } else if(cells[i].alive) { if(neighbors < 2) { cells[i].will_die = true; } else if(neighbors < 4) { cells[i].will_die = false; continue; } else if (neighbors < 9) { cells[i].will_die = true; } else { console.log("ERROR: Impossible for cell to have more than 8 neighbors. Cell[" +  cells[i].x + "," +cells[i].y + "] reports " + neighbors + " neighbors"); break; } } else { cells[i].will_die = true; } } for(var i = 0; i < cells.length; i++) { if(cells[i].will_die) { cells[i].alive = false; } else { cells[i].alive = true; } } } function reset() { resize(); cells = initSeeds([]); gameSpeed(timeout); } function gameSpeed(newSpeed) { timeout = newSpeed; if(updateTask) { clearInterval(updateTask); } updateTask = setInterval(update, timeout); } function repeat(newGameInterval, newSpeed) { game_interval = newGameInterval; if(newGameInterval == 0) { one_game_only = true; } else { one_game_only = false; } if(newSpeed > 0) { timeout = newSpeed; gameSpeed(timeout); } if(repeatTask) { clearInterval(repeatTask); } if(!one_game_only) { repeatTask = setInterval(reset, game_interval * 1000); } } function setHTMLDefaultControls() { rows = document.getElementById("rowSlider").value; cols = document.getElementById("columnSlider").value; timeout = document.getElementById("delaySlider").value; var b_r = document.getElementById("bredSlider").value; var b_g = document.getElementById("bgreenSlider").value; var b_b = document.getElementById("bblueSlider").value; dead_color = "rgba(" + b_r + ", " + b_g + ", " + b_b + ", 1)"; var c_r = document.getElementById("credSlider").value; var c_g = document.getElementById("cgreenSlider").value; var c_b = document.getElementById("cblueSlider").value; alive_color = "rgba(" + c_r + ", " + c_g + ", " + c_b + ", 1)"; var g_r = document.getElementById("gredSlider").value; var g_g = document.getElementById("ggreenSlider").value; var g_b = document.getElementById("gblueSlider").value; grid_color = "rgba(" + g_r + ", " + g_g + ", " + g_b + ", 1)";	make_square = document.getElementById("squareCheckbox").checked; draw_grid = document.getElementById("gridCheckbox").checked; } function r_input() { if(make_square) { return; } rows = document.getElementById("rowSlider").value; reset(); } function c_input() { cols = document.getElementById("columnSlider").value; reset(); } function timeout_input() { timeout = document.getElementById("delaySlider").value; gameSpeed(timeout); } function color_input() { var b_r = document.getElementById("bredSlider").value; var b_g = document.getElementById("bgreenSlider").value; var b_b = document.getElementById("bblueSlider").value; dead_color = "rgba(" + b_r + ", " + b_g + ", " + b_b + ", 1)"; var c_r = document.getElementById("credSlider").value; var c_g = document.getElementById("cgreenSlider").value; var c_b = document.getElementById("cblueSlider").value; alive_color = "rgba(" + c_r + ", " + c_g + ", " + c_b + ", 1)"; var g_r = document.getElementById("gredSlider").value; var g_g = document.getElementById("ggreenSlider").value; var g_b = document.getElementById("gblueSlider").value; grid_color = "rgba(" + g_r + ", " + g_g + ", " + g_b + ", 1)"; } function square_input() { make_square = document.getElementById("squareCheckbox").checked; resize(); } function grid_input() { draw_grid = document.getElementById("gridCheckbox").checked; } var cells;reset(); if(!one_game_only) { repeat(game_interval, timeout); }
		</script>
	</body>
</html>